(this.webpackJsonppytoasm=this.webpackJsonppytoasm||[]).push([[0],{40:function(e){e.exports=JSON.parse('{"samples":[{"type":"Statement","code":"b = 1\\na = 1\\nb = a * 2 / b\\nprint(b)","maps2flowchart":[{"rowId":0,"tab":0,"code":"b = 1","highlight":["id8"]},{"rowId":1,"tab":0,"code":"print(c)","highlight":["sub10"]}]},{"type":"WhileLoop","code":"i = 0\\ntotal = 0\\nwhile i < 10:\\n\\ttotal = total + i\\n\\ti = i + 1"},{"type":"IfElse","code":"a = 1\\nb = 1\\nc = 1\\nd = 1\\nif a > 0:\\n\\tif b > 0:\\n\\t\\tprint(\'ab\')\\n\\t\\tif c > 0:\\n\\t\\t\\tcgz()\\n\\t\\telif d > 0:\\n\\t\\t\\tclez()\\n\\tprint(\'abc\')\\nelse:\\n\\talez()\\nend_of_ifs()"},{"type":"FunctionDef","code":"def add(a,b):\\n\\treturn a + b\\na = 1\\nb = 2\\nc = add(a,b)"},{"type":"ForLoop","code":"for i in range(10):\\n\\tfor j in range(i):\\n\\t\\tprint(\\"*\\")\\n\\tprint(\\"\\\\n\\")"}]}')},51:function(e,t,n){},52:function(e,t,n){},520:function(e,t,n){"use strict";n.r(t);var o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,525)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),o(e),r(e),a(e),s(e)}))},r=n(0),a=n.n(r),s=n(12),c=n.n(s),i=n(6),l=n(7),d=n(9),u=n(8),h=(n(51),n(52),n(22)),p=n.n(h),b=(n(60),n(500),n(501),n(502),n(524)),f=n(523),g=n.p+"static/media/logo.9545f0dd.png",j=n(1),C=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).handleShow=function(){var e=o.state.show;o.setState({show:!e})},o.state={show:!1},o}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{children:[Object(j.jsxs)("nav",{className:"navbar navbar-light bg-dark justify-content-between",children:[Object(j.jsx)("a",{className:"navbar-brand",href:"#",children:Object(j.jsx)("img",{src:g,width:"120",height:"30",alt:""})}),Object(j.jsx)(b.a,{variant:"primary",onClick:function(){return e.handleShow()},children:"Show Tutorial"})]}),Object(j.jsxs)(f.a,{show:this.state.show,onHide:function(){return e.handleShow()},dialogClassName:"tutorial-modal",children:[Object(j.jsx)(f.a.Header,{closeButton:!0,children:Object(j.jsx)(f.a.Title,{children:"Tutorial Video"})}),Object(j.jsx)(f.a.Body,{children:Object(j.jsx)("iframe",{src:"https://player.vimeo.com/video/737400856?h=ad16eb8afb&badge=0&autopause=0&player_id=0&app_id=58479",width:"958",height:"500",frameborder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowfullscreen:!0,title:"Screen Recording 2022-08-07 at 01.31.07.mov"})}),Object(j.jsx)(f.a.Footer,{children:Object(j.jsx)(b.a,{variant:"secondary",onClick:function(){return e.handleShow()},children:"Close"})})]})]})}}]),n}(r.Component),m=(n(506),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("footer",{className:"text-right text-lg-start text-white bg-dark fixed-bottom",children:[Object(j.jsx)("hr",{className:"my-3"}),Object(j.jsx)("div",{className:"text-center",children:"Mengqi Jiang from University of Glasgow"}),Object(j.jsxs)("div",{className:"text-center",children:["Inspired from ",Object(j.jsx)("a",{href:"https://pythontutor.com/",children:"PythonTutor"}),"&",Object(j.jsx)("a",{href:"https://godbolt.org/",children:"GodBolt"})]}),Object(j.jsxs)("div",{className:"text-center",children:[Object(j.jsx)("a",{className:"btn btn-outline-light btn-floating m-1 text-white text-right",role:"button",href:"https://github.com/JSparksssss",children:Object(j.jsx)("i",{className:"fa-brands fa-github"})}),Object(j.jsx)("span",{className:"text-light",children:" @Jsparksssss"})]})]})}}]),n}(r.Component)),x=n(40),v=n(41),O=n.n(v),w=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var o;Object(i.a)(this,n),o=t.call(this,e);var r="".concat(o.props.code);return o.state={code:r,opt:{x:0,y:0,"line-width":3,"line-length":50,"text-margin":10,"font-size":14,"font-color":"black","line-color":"black","element-color":"black",fill:"white","yes-text":"yes","no-text":"no","arrow-end":"block",scale:1,symbols:{start:{"font-color":"red","element-color":"green","font-weight":"bold"},end:{"font-color":"red","element-color":"green","font-weight":"bold"}},flowstate:{target:{fill:"yellow"}}},elementText:"none"},o}return Object(l.a)(n,[{key:"handleCodeChange",value:function(e){this.setState({code:e},(function(){}))}},{key:"handleOptChange",value:function(e){this.setState({opt:JSON.parse(e.target.value)})}},{key:"elText",value:function(e){console.log(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.code,o=t.opt;t.elementText;return Object(j.jsx)(O.a,{chartCode:n,options:o,onClick:function(t){return e.elText(t)}})}}]),n}(r.Component),y=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).renderElseArr=function(e){var t=[];console.log(e);for(var n=e.split("\n"),o=0;o<n.length;o++)"else:"==n[o].replace(/\s*/g,"")&&(t.push(o),console.log(o));return t},o.renderFlowchartCode=function(){var e=o.fcCode.split("\n"),t=e.indexOf("");o.defArr=e.slice(0,t),o.conArr=e.slice(t,e.length-1)},o.renderActiveBlock=function(e){o.renderFlowchartCode();var t=e+1,n=o.defArr;n[t]=n[t]+"|target";var r=n.concat(o.conArr).join("\n");o.setState({fcCode:r},(function(){o.flowChartComponent.current.handleCodeChange(o.state.fcCode)}))},o.generateCodeTable=function(){for(var e=[],t=0;t<o.sourceCodeArray.length;t++){console.log(o.sourceCodeArray[t]);var n=Object(j.jsx)("tr",{className:"visualize-code "+(o.state.exeIndex===t?"pta-highlight-code":""),children:o.sourceCodeArray[t]});e.push(n)}return Object(j.jsx)("table",{children:e})},o.gotoNextLine=function(){o.setState({exeIndex:o.state.exeIndex+1})},o.gotoLastLine=function(){o.setState({exeIndex:o.state.exeIndex-1})},o.onFocusCode=function(e){for(var t=e.cursor.row,n=t,r=0;r<o.elseArr.length;r++)t>o.elseArr[r]?n-=1:t==o.elseArr[r]&&alert("There is not a related block in flowchart.");o.renderActiveBlock(n)},o.sourceCodeArray=o.props.sourceCode.split("\n"),o.fcCode=o.props.fcCode,o.defArr=[],o.conArr=[],o.elseArr=o.renderElseArr(o.props.sourceCode),o.state={fcCode:o.props.fcCode,exeIndex:0,defArr:[],conArr:[],elseArr:[]},o.flowChartComponent=a.a.createRef(),o}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)(p.a,{className:"col",mode:"python",theme:"github",onCursorChange:function(t){return e.onFocusCode(t)},name:"PYTHON_CODE",editorProps:{$blockScrolling:!0},setOptions:{wrapBehavioursEnabled:!0},value:this.props.sourceCode}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("button",{type:"button",className:"btn btn-danger m-4 pta-btn-text",id:"edit-code",onClick:this.props.editCode,style:{minWidth:"200px"},children:"Back to edit code"})}),Object(j.jsx)("div",{id:"canvas",className:"bg-light col",children:Object(j.jsx)(w,{ref:this.flowChartComponent,code:this.state.fcCode})})]}),Object(j.jsx)("footer",{className:"bg-dark",style:{height:"8em"}})]})}}]),n}(r.Component);n(19);var k=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).renderHighlight=function(e){o.setState({markers:[]});var t=[];console.log(o.state.py2llcmap);var n=function(e,t){for(var n=0;n<t.length;n++)if(e===t[n].py_index)return t[n].pseudo_index;return null}(e,o.state.py2llcmap);try{for(var r=0;r<n.length;r++){var a=n[r];t.push({startRow:a,startCol:0,endRow:a+1,endCol:0,className:"highlight",type:"background"})}o.setState({markers:t},(function(){console.log(o.state.markers)}))}catch(s){console.log(s),alert("This pseudo code is not match")}},o.onsourceCodeChange=function(e){!0===o.state.pseudoCodeStatus&&o.setState({pseudoCodeStatus:!1,markers:[]}),o.setState({originCode:e})},o.onFocusCode=function(e){if(!0===o.state.pseudoCodeStatus){var t=e.cursor.row;o.renderHighlight(t)}},o.whitenOriginCode=function(e){for(var t=e.split("\n"),n=[],o=[],r=0;r<t.length;r++){""==t[r].replaceAll("    ","")&&o.push(r)}for(r=0;r<t.length;r++)-1===o.indexOf(r)&&n.push(t[r]);return n.join("\n")},o.convertCode=function(){console.log("Origin-code:",o.state.originCode);var e=o.state.originCode.replaceAll("\n","(enter)").replaceAll("\t","(tab)").replaceAll("+","(add)");console.log(e);var t=o.whitenOriginCode(o.state.originCode);fetch("/dis?code="+e).then((function(e){return e.json()})).then((function(e){o.setState({markers:[],originCode:t,pseudoCodeStatus:!0,pseudoCode:e.code,py2llcmap:e.map})}))},o.sequenceFlowChart=function(e){for(var t=e.split("\n"),n=t.indexOf(""),o=t.slice(0,n),r=t.slice(n,t.length),a=[],s=0;s<o.length;s++){var c={id:o[s].split("=>")[0],content:o[s].split("=>")[1]};a.push(c)}for(var i=0;i<a.length-1;i++)for(var l=i;l<a.length-1;l++)if(parseInt(a[l].id.replace(/[^0-9]/gi,""))>parseInt(a[l+1].id.replace(/[^0-9]/gi,""))){var d=a[l];a[l]=a[l+1],a[l+1]=d}for(var u=0;u<a.length;u++){var h=a[u].id+"=>"+a[u].content;o[u]=h}return o.concat(r).join("\n")},o.justifyExecution=function(){console.log("Origin-code:",o.state.originCode);var e=o.state.originCode.replaceAll("\n","(enter)").replaceAll("\t","(tab)").replaceAll("+","(add)");console.log("Transform Text is:",e),fetch("/flowchart-sample?code="+e).then((function(e){return e.json()})).then((function(e){console.log(e.code);var t=o.sequenceFlowChart(e.code);e.code&&o.setState({flowChartCode:t,visualizeExecutionStatus:!0})}))},o.insertSampleCode=function(e){var t=o.samples[e.target.id];o.setState({pseudoCodeStatus:!1,pseudoCode:"",originCode:t.code})},o.backToEditPage=function(){o.setState({visualizeExecutionStatus:!1})},o.state={originCode:"",pseudoCode:"",currentCode:"",flowChartCode:"",pseudoCodeStatus:!1,flowChartCodeStatus:!1,visualizeExecutionStatus:!1,modalStatus:!1,markers:[],py2llcmap:null},o.samples=x.samples,o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:"App bg-dark",children:[Object(j.jsx)(C,{showTutorial:function(){return e.showTutorial()}}),this.state.visualizeExecutionStatus?Object(j.jsx)(y,{editCode:this.backToEditPage,sourceCode:this.state.originCode,fcCode:this.state.flowChartCode}):Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)(p.a,{className:"col",mode:"python",theme:"github",onChange:this.onsourceCodeChange,onCursorChange:function(t){return e.onFocusCode(t)},name:"PYTHON_CODE",editorProps:{$blockScrolling:!0},setOptions:{wrapBehavioursEnabled:!0},value:this.state.originCode}),Object(j.jsxs)("div",{className:"col-4",children:[Object(j.jsx)("button",{type:"button",className:"btn btn-warning m-4 pta-btn-text",id:"convert-code",onClick:function(){return e.convertCode()},style:{minWidth:"200px"},children:"Convert to Pseudo-code"}),Object(j.jsx)("button",{type:"button",className:"btn btn-warning m-4 pta-btn-text",id:"execution",onClick:function(){return e.justifyExecution()},style:{minWidth:"200px"},children:"Visualization Execution"})]}),Object(j.jsx)(p.a,{className:"col",onChange:this.ontargetCodeChange,name:"PSEUDO_CODE",editorProps:{$blockScrolling:!0},setOptions:{wrapBehavioursEnabled:!0},highlightActiveLine:!1,value:this.state.pseudoCode,markers:this.state.markers}),Object(j.jsx)("p",{className:"text-left text-light",children:"Samples"}),Object(j.jsx)("div",{className:"row",children:this.samples.map((function(t,n){return Object(j.jsx)("div",{id:n,className:"btn btn-warning col m-1 pta-btn-text",onClick:function(t){e.insertSampleCode(t)},children:t.type},n)}))})]})}),Object(j.jsx)(m,{})]})}}]),n}(r.Component),S=document.getElementById("root");c.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(k,{})}),S),o()}},[[520,1,2]]]);
//# sourceMappingURL=main.023ce0b2.chunk.js.map